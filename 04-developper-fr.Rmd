# Développer {#developper-fr}

## Directives

Ce guide est conçu pour aider les développeurs et développeuses lors de la création et de la modification du contenu des ateliers R du CSBQ. Nous voulons nous assurer que les participants et participantes peuvent se concentrer sur le contenu présenté sans être distrait.e.s par des questions de style, de grammaire, de ponctuation et/ou de structure.

Veuillez lire attentivement ce guide avant de commencer et vous y référer régulièrement pendant votre travail.

### Principales priorités

Nous avons établi ici une liste de priorités pour les concepteurs d'ateliers. L'idéal serait que les développeurs et développeuses accomplissent toutes ces tâches, mais si les circonstances rendent cela impossible, il est important de se concentrer sur les changements structurels avant les questions de style.

**Spécifique à l'adaptation des ateliers au cadre à distance:**

1. Les ateliers doivent s'adapter à un nouveau format de 3 heures (comprenant des exercices et une ou deux pauses de cinq minutes). Pour cela, vous pouvez choisir de cacher les diapositives des ateliers existants pour les adapter à ce format. Par exemple, vous pouvez masquer les exemples répétitifs, les diapositives non essentielles ou certaines des diapositives avancées supplémentaires qui sont incluses à la fin des ateliers. Nous sommes conscients que certains ateliers seront plus difficiles à raccourcir que d'autres ; ce n'est pas un problème que les ateliers durent un peu plus de 3 heures pour garantir des informations précises et complètes. (*Utilisez votre jugement*).

2. **Ne supprimez pas les diapositives**. Pour cacher une diapositive pour l'instruction à distance, utilisez la balise "`instruction: remote`". Voir un exemple ci-dessous :

```
---
instruction: remote

# Titre de la diapositive : J'adore les statistiques !

### Contenu : Incroyable !
---
```

3. Développez de nouveaux exercices ou adaptez les exercices actuels pour mieux répondre au format d'atelier à distance et à l'utilisation des salles de réunion. Les exercices doivent être informatifs et attrayants. N'oubliez pas de prevoyer et de laisser aux participants et participantes le temps de travailler sur les exercices et de poser des questions.

**Priorités générales:**

1. Traiter les problèmes existants soumis à GitHub.

2. S'assurer que le code fonctionne correctement et que le code correspond à la présentation de l'atelier. Continuez à vérifier cela au fur et à mesure que vous apportez des modifications.

3. S'assurer que les versions francophone et anglophone d'un atelier sont toutes les deux mises à jour et que le contenu est équivalent.

4. Les ateliers ne doivent pas contenir des fautes d'orthographe, de grammaire ou de ponctuation.

5. Veiller à ce que les diapositives des ateliers soient rédigées dans un style cohérent, ce qui facilite le déroulement des ateliers et la compréhension des participants. Cela est particulièrement important lorsque l'on travaille en collaboration avec d'autres développeurs.

6. Dans la mesure du possible, ajoutez des [*notes de présentation*](https://bookdown.org/yihui/rmarkdown/xaringan-format.html#xaringan-notes) aux diapositives que vous modifiez. Vous pouvez écrire des notes que vous pourrez lire vous-même en mode présentateur quand vous appuyez sur le raccourci clavier `P`. Ces notes sont écrites sous trois points d'interrogation `???`, avant la fin d'une diapositive. Voir l'exemple ci-dessous :

```
---
Le contenu de cet atelier est essentiel.

???

Note : _Le présentateur doit chanter cette diapositive aux participants_.
---
```

### Règles structurelles

1. Ne laissez pas le contenu des diapositives déborder de l'écran.

2. Le code utilisé pour générer un résultat (chiffre ou calcul) doit correspondre au code affiché.

3. Utilisez les cochettes de retour ` ` ` chaque fois que vous mentionnez une fonction, un objet ou un paquet dans votre prose.

4. Utilisez les trois dernières cases à cocher ` ``` ` pour séparer les morceaux de code de la prose.

5. Faites attention à la fluidité et aux distractions.


### Grammaire et style

1. Faites attention à la ponctuation, à l'orthographe et à la grammaire.

2. Faites votre mieux pour être clair et concis. Évitez les phrases trop longues.

3. Relisez l'atelier dans son intégralité pour vous assurer que le flux est bon.

4. N'hésitez pas à demander à votre pair en développement de réviser votre texte.

### Exercices interactifs

Les ateliers doivent être interactifs et comprendre des exercices et des sondages. Nous présentons ci-dessous quelques exemples d'exercices, de modes d'apprentissage fondés sur des données probantes et de stratégies efficaces pour organiser des ateliers à distance pour les participants. 

Nous vous recommandons de prendre votre temps et de bien planifier l'élaboration des exercices. Veillez à ce que les objectifs de l'exercice soient en adéquation avec ceux de l'atelier.

> Rappelez-vous que tout ce qui est écrit dessous le `???` est une note pour le présentateur et n'apparaîtra donc pas dans la diapositive de présentation, mais apparaîtra dans la fenêtre du mode présentateur.

#### Sondages simples

Voir ci-dessous quelques exemples de deux diapositives contenant un exercice suivi de leurs solutions.

**Exemple 1**

Contexte : Les participants à l'atelier viennent d'apprendre quelles fonctions utiliser pour effectuer des comparaisons entre groupes dépendants et indépendants, et ont également été initiés à la vérification d'hypothèses unilatérales et bilatérales.

Objectif : évaluer les connaissances des participants et les rendre plus confiants dans le choix du test à deux échantillons approprié dans leur recherche. 

```
---
Nous souhaitons évaluer si nous trouvons plus d'acromanthules dans les zones boisées et ombragées par rapport aux zones ouvertes. Nous sommes allés sur le terrain et avons compté le nombre d'individus (variable : `abundance`) dans dix paysages forestiers et ouverts répartis de manière aléatoire (variable : `type_of_area`). Laquelle des fonctions suivantes serait appropriée pour tester notre hypothèse ?

1. `t.test(type_of_area, abundance, data = acromantula_experiment, alternative = "two.sided")`;
2. `t.test(type_of_area, abundance, data = acromantula_experiment, paired = TRUE, alternative = "two.sided").`
3. `t.test(type_of_area, abundance, data = acromantula_experiment, alternative = "one.sided")`;

???
Note : Pendant ce moment, un sondage doit être ouvert aux participants. Une fois que vous avez obtenu la réponse des participants, montrez-leur la bonne réponse. Vous pouvez demander à l'un des participants d'expliquer sa réponse.

---
Nous souhaitons évaluer si nous trouvons plus d'acromanthules dans les zones boisées et ombragées par rapport aux zones ouvertes. Nous sommes allés sur le terrain et avons compté le nombre d'individus (variable : `abundance`) dans dix paysages forestiers et ouverts répartis de manière aléatoire (variable : `type_of_area`). Laquelle des fonctions suivantes serait appropriée pour tester notre hypothèse ?

1. `t.test(type_of_area, abundance, data = acromantula_experiment, alternative = "two.sided")`;
2. `t.test(type_of_area, abundance, data = acromantula_experiment, paired = TRUE, alternative = "two.sided").`
3. `t.test(type_of_area, abundance, data = acromantula_experiment, alternative = "one.sided")`; #<<


???
Note : Vous devez préciser aux participants la distinction entre les tests d'hypothèse bilatéraux et unilatéraux (i.e. one-sided and two-sided; dans le contexte du problème). En outre, vous devez également rappeler les différences entre les mesures dépendantes et indépendantes (en rapport avec l'argument `paired`).
---
```

**Exemple 2**

Contexte : 

Objectif : 

```
---

---

---
```

#### Exercice de groupe

Le travail en petits groupes permet d'exploiter les forces de chaque membre du groupe et d'améliorer le succès du cadre collectif. Cet exercice exige que les participants soient répartis au hasard dans des salles de réunion (idéalement, 5 participants par salle) et doit comprendre une activité se rapportant à un point de discussion. À la fin de cet exercice, les groupes sont reconvoqués et un des participants de chaque salle de réunion doit faire un rapport et résumer la discussion. Cette activité doit durer environ 10 minutes (parfois moins si elle est très simple) et doit utiliser les informations qui ont été fournies aux participants pendant l'atelier.

Voir ci-dessous deux exemples de diapositives contenant un exercice suivi de sa solution :

**Exemple 1** 

Contexte : Cet exercice doit être fourni pour préparer le terrain aux discussions lors d'un atelier de visualisation de données. Il n'exige pas des participants une solide connaissance de la visualisation de données.

Objectif : Encourager la réflexion critique des participants sur la visualisation de données.

```
---
Group discussion: Below there are three charts compiled from a visualization book (reference shown in the next slide). Open and observe the charts and discuss with your group to respond the following questions:

(a) What problems do you see in each one of the charts? 
(b) What are the consequences of these problems you have identified?
(b) What would you change in each one of them to improve their information?

### Add these images side by side.

![](https://socviz.co/assets/ch-01-chartjunk-life-expectancy.png)

![](https://socviz.co/assets/ch-01-holmes-monstrous-only.png)

![](https://socviz.co/assets/ch-01-democracy-nyt-version.png)

![](https://socviz.co/assets/ch-01-excel-3d-column-chart-values.png)

???
Note: Clearly read the exercise to the participants and show them the figures. Tell them that they should summarise their answers and then one person should report back to the discussion when the class is convened. You may allow 5 to 8 minutes for the discussion in the breakout rooms (depending on group size) as this is is a very simple example. 
---
Group discussion: Below there are three charts compiled from a (visualization book)[https://socviz.co/lookatdata.html]. Open and observe the charts and discuss with your group to respond the following questions:

(a) What problems do you see in each one of the charts? 
(b) What are the consequences of these problems you have identified?
(b) What would you change in each one of them to improve their information?

### Show images side-by-side
![](https://socviz.co/assets/ch-01-democracy-nyt-version.png)

![](https://socviz.co/assets/ch-01-democracy-voeten-version-2.png)

???
Note: The figures in question are not only a matter of bad taste, but have issues related to the way they convey information. In this example, the issue is not due to a difference in how the y-axis is drawn. Rather, a different measure is being shown: we are now looking at the trend in the average score, rather than the trend for the highest possible answer.
---
```

**Example 2** *Include another example with a more statistical discussion.*

Context:

Goal:
```
---

---

---
```

#### Individual exercise

Simple individual exercises require participants to practice a bit on their own. Depending on how difficult the exercises may be, consider allocating between 5 and 10 minutes for their execution.

While these exercises help participants assimilate the content, some attendees may be less driven to practice and execute them (in contrary to the group exercises). Because of this, consider include other types of exercises in addition to these ones.

At the end of these exercises, the presenter should give the opportunity for one or a few participants to present and discuss their responses.

Below, we can see an example for an independent exercise and its solution:

Context: Participants have just been introduced to the distribution families, link functions and they have seen examples of how the `glm()` and `manyglm()` function work.

Goal: Encourage participants to always observe diagnostic plots when choosing between models.

```
---
Use `manyglm()` to estimate the responses of mite community composition to all environmental variables associated with the `mite` dataset. Which error families (gaussian, poisson or negative binomial) best fit the data?

Do not forget to load the `vegan` and `mvabund` libraries, and use `data(mite)` and `data(mite.env)` to load the datasets.

Tip: Remember what we have discussed about model assumptions!

???
Note: The objective of this exercise is to allow participants to independently write the models, to assign the appropriate arguments related to the distribution families and to realize they should plot the residuals against fitted values to decide on the best model. The instructor can remind participants about what both datasets include. The instructor or the assistant may help participants realize which arguments they can use by suggesting them to use the help `?` function. At the end of this exercise, invite participants to share their response and ask them how they have obtained it.

---
Use `manyglm()` to estimate the responses of mite community composition to all environmental variables associated with the `mite` dataset. Which error families (gaussian, poisson or negative binomial) best fit the data?

Solution:

### To be displayed inside a chunk code block:

mitedat <- mvabund(mite)

mite.gaussian.glm <- manyglm(mitedat ~ SubsDens + WatrCont + Substrate + Shrub + Topo, data = mite.env, family='gaussian')
mite.poisson.glm <- manyglm(mitedat ~ SubsDens + WatrCont + Substrate + Shrub + Topo, data = mite.env, family='poisson')
mite.nb.glm <- manyglm(mitedat ~ SubsDens + WatrCont + Substrate + Shrub + Topo, data = mite.env, family='negative.binomial')

# Display diagnostic plots side-by-side:
par(mfrow=c(1,3))
plot(mite.gaussian.glm)
plot(mite.poisson.glm)
plot(mite.nb.glm)

### End of code chunk

???

Note: Clearly show which arguments changed between the functions and what do they imply. Speak with the participants about how assumptions of distribution of residuals and predicted values still have to be met for the models to be considered valid.
---
```

**Example 2**

*Include another example with a more statistical discussion.*

Context:

Goal:
```
---

---

---
```

## How to develop workshops

This section guides you through the process of contributing edits to QCBS R workshop presentations.

### Getting started

The QCBS R Workshops are Rmarkdown presentations created using [xaringan](https://bookdown.org/yihui/rmarkdown/xaringan.html), so the first step is to install the `R` package `xaringan`.

```{r install-xaringan-fr, eval=FALSE}
if(!require(devtools)) install.packages('devtools')
devtools::install_github('yihui/xaringan')
```

Secondly, you need to create a local copy of the repository for the workshop you will be working on, found [here](https://github.com/QCBSRworkshops). To do so, you can [clone the GitHub repository](https://help.github.com/articles/cloning-a-repository/) on your computer.

You can use the command line to do this (more details [here](https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/cloning-a-repository#cloning-a-repository-using-the-command-line)):

```{bash, eval=FALSE}
git clone https://github.com/QCBSRworkshops/workshop01.git
# change this link depending on the workshop you're working on!
```

If you are not comfortable with the command line, you can clone this repository using [GitHub Desktop](https://desktop.github.com/), following instructions [here](https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/cloning-a-repository#cloning-a-repository-to-github-desktop).

Once you have cloned the repository, you are ready to begin developing! 

### GitHub workflow

GitHub creates repositories with a single default branch, named `dev` (if you work in the command line) or `master` (if you work in GitHub Desktop). This is the branch you see when you visit the repository. 

We strongly recommend working on a **new branch**, which allows you to develop the workshops without affecting the main branch in the repository. Working on a separate branch means that changes are only implemented in the original content once your contributions are reviewed. This is a "safer" way to develop the workshops, particularly when multiple people are collaborating on a workshop at the same time. 

1. **Create and publish a new branch**. Choose a name that is explicit about what you are adding, *e.g.* `workshop1_intro` if you are working on the introduction of workshop 1.

On the command line:
```{bash-fr, eval=FALSE}
git branch workshop1_intro # creates a new branch
```

Github Desktop ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/managing-branches#creating-a-branch)).

2. **Switch to this branch**. Make sure you are working on your new branch!

On the command line:
```{bash, eval = FALSE}
git checkout workshop1_intro # switches to this branch

# Note that you can create and switch branch in a single line: 
git checkout -b workshop1_intro
```

GitHub Desktop ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/managing-branches#switching-between-branches)).

3. **Make your changes**, following the [Guidelines](https://qcbsrworkshops.github.io/presenter-developer-protocol/_book/developing-en.html#guidelines) listed above.

4. **Add and commit your changes**. Once you are finished making changes on your branch, add and commit them to record these changes. When you commit changes, it is essential to include a commit message that briefly summarizes what you've done. Keep it brief but informative!

On the command line:
```{bash, eval=FALSE}
git add -A # add all your changes
git commit -m "fix code for plot in Challenge 1" # commit your changes with a message
```

You can also use GitHub Desktop to add changes ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/committing-and-reviewing-changes-to-your-project#2-selecting-changes-to-include-in-a-commit)) and commit them ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/committing-and-reviewing-changes-to-your-project#3-write-a-commit-message-and-push-your-changes)).

5. **Sync your main branch with the remote repository**. It's important to make sure your main branch is up to date before changing it. Go to back to the main branch and pull changes that were made since you last copied the repository.

Pull the `dev` on the command line:
```{bash, eval=FALSE}
git checkout dev # switch back to the main branch
pull git # pull changes
```

Pull the `master` branch on GitHub Desktop ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/syncing-your-branch#pulling-to-your-local-branch-from-the-remote)).

6. **Merge your branch with the main branch locally.** Switch back to your branch (e.g. `workshop1_intro`) and merge it with your local main branch. If there are conflicts, please resolve them! 

You can merge your branch with the `dev` branch using the command line:
```{bash, eval=FALSE}
git checkout workshop1_intro # switch back to your branch
git merge dev # merge the main branch with your branch
```

Merge your branch with the `master` branch in GitHub Desktop ([instructions here](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/syncing-your-branch#merging-another-branch-into-your-project-branch)).

7. **Push your locally merged branch** to the remote GitHub repository. 

On the command line, you can push your locally merged branch (e.g. `workshop1_intro`) to the remote repository like this:
```{bash, eval=FALSE}
git push --set-upstream origin workshop1_intro # push to the remote!
```

Push your branch (e.g. `workshop1_intro`) to the remote repository in GitHub Desktop ([see step #4)](https://docs.github.com/en/free-pro-team@latest/desktop/contributing-and-collaborating-using-github-desktop/syncing-your-branch#merging-another-branch-into-your-project-branch)).

8. **Open a [Pull Request](https://help.github.com/articles/about-pull-requests/)**.

Pull requests are a way to let your collaborators know about changes that you have pushed to a branch in the Github repository. Once you have opened a pull request, we can review potential changes and add follow-up commits (if needed) before your changes are merged into the main branch.

To open a pull request for your branch (e.g. `workshop1_intro`), please follow these [instructions](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request#creating-the-pull-request).

9. **Assign** your pull request to a reviewer (one of the R workshop coordinators). The reviewer will then review, squash, and merge your changes.

10. Once the pull request is merged, do not forget to **pull the main branch**!


## Other ways to contribute

If you are not comfortable with GitHub, you can still help us improve the workshops!

If you notice any mistakes or inconsistencies, or if you would like to make a suggestion, either in form or in content, you are invited to open an [issue](https://help.github.com/articles/about-issues/). You can follow these simple steps to create a new [issue](https://help.github.com/articles/creating-an-issue/).